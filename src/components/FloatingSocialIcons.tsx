"use client";

import { useEffect, useState } from "react";

const FloatingSocialIcons = () => {
  const [isVisible, setIsVisible] = useState(false);
  useEffect(() => {
    const handleScroll = () => {
      const footerSection = document.querySelector(".footer");
      const scrollPosition = window.scrollY;

      if (footerSection) {
        const footerRect = footerSection.getBoundingClientRect();
        const inFooterSection = footerRect.top <= window.innerHeight && footerRect.top >= 0;

        // Hide if scroll position is less than 200px or in footer section
        setIsVisible(!(scrollPosition <= 200 || inFooterSection));
      }
    };

    window.addEventListener("scroll", handleScroll);
    handleScroll(); // Initial check

    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  if (!isVisible) return null;

  return (
    <div className="fixed bottom-8 end-8 z-50 flex flex-col gap-4">
      <button
        className="w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center hover:scale-110 transition-transform duration-200"
        aria-label="Share on Facebook"
      >
        <svg
          width="30"
          height="30"
          viewBox="0 0 30 30"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_195_1755)">
            <path
              d="M8.01166 25.6939L8.49645 25.9363C10.5164 27.1482 12.7788 27.7138 15.0411 27.7138C22.1513 27.7138 27.9688 21.8964 27.9688 14.7861C27.9688 11.3926 26.5952 8.07986 24.1713 5.65591C21.7474 3.23197 18.5154 1.8584 15.0411 1.8584C7.93086 1.8584 2.11339 7.67587 2.19419 14.8669C2.19419 17.2909 2.92137 19.634 4.13335 21.654L4.45654 22.1387L3.16377 26.9058L8.01166 25.6939Z"
              fill="#00E676"
            />
            <path
              d="M25.5445 4.3631C22.7973 1.53517 18.9998 0 15.1215 0C6.88008 0 0.254626 6.70625 0.335425 14.8669C0.335425 17.4524 1.06261 19.9572 2.27458 22.2195L0.173828 29.8953L8.01125 27.8754C10.1928 29.0874 12.6168 29.6529 15.0407 29.6529C23.2013 29.6529 29.8268 22.9467 29.8268 14.7861C29.8268 10.827 28.2916 7.11024 25.5445 4.3631ZM15.1215 27.1482C12.9399 27.1482 10.7584 26.5826 8.90003 25.4514L8.41524 25.209L3.72895 26.421L4.94092 21.8155L4.61773 21.3307C1.06261 15.5941 2.75937 7.99902 8.57684 4.4439C14.3943 0.88878 21.9085 2.58554 25.4637 8.40301C29.0188 14.2205 27.322 21.7347 21.5046 25.2898C19.6462 26.5018 17.3838 27.1482 15.1215 27.1482ZM22.2317 18.1796L21.343 17.7756C21.343 17.7756 20.0502 17.21 19.2422 16.806C19.1614 16.806 19.0806 16.7252 18.9998 16.7252C18.7574 16.7252 18.5958 16.806 18.4342 16.8868C18.4342 16.8868 18.3534 16.9676 17.2222 18.2604C17.1415 18.422 16.9799 18.5028 16.8183 18.5028H16.7375C16.6567 18.5028 16.4951 18.422 16.4143 18.3412L16.0103 18.1796C15.1215 17.7756 14.3135 17.2908 13.6671 16.6444C13.5055 16.4828 13.2631 16.3212 13.1015 16.1596C12.536 15.5941 11.9704 14.9477 11.5664 14.2205L11.4856 14.0589C11.4048 13.9781 11.4048 13.8973 11.324 13.7357C11.324 13.5741 11.324 13.4125 11.4048 13.3317C11.4048 13.3317 11.728 12.9277 11.9704 12.6853C12.132 12.5237 12.2128 12.2813 12.3744 12.1197C12.536 11.8773 12.6168 11.5541 12.536 11.3117C12.4552 10.9078 11.4856 8.7262 11.2432 8.24142C11.0816 7.99902 10.92 7.91822 10.6776 7.83742H10.4352C10.2736 7.83742 10.0312 7.83742 9.78881 7.83742C9.62722 7.83742 9.46562 7.91822 9.30403 7.91822L9.22323 7.99902C9.06163 8.07982 8.90003 8.24142 8.73844 8.32221C8.57684 8.48381 8.49604 8.64541 8.33445 8.807C7.76886 9.53419 7.44567 10.423 7.44567 11.3117C7.44567 11.9581 7.60726 12.6045 7.84966 13.1701L7.93046 13.4125C8.65764 14.9477 9.62722 16.3212 10.92 17.5332L11.2432 17.8564C11.4856 18.0988 11.728 18.2604 11.8896 18.5028C13.5863 19.9572 15.5255 21.0075 17.707 21.5731C17.9494 21.6539 18.2726 21.6539 18.515 21.7347C18.7574 21.7347 19.0806 21.7347 19.323 21.7347C19.727 21.7347 20.2118 21.5731 20.535 21.4115C20.7774 21.2499 20.939 21.2499 21.1006 21.0883L21.2622 20.9267C21.4238 20.7651 21.5854 20.6843 21.7469 20.5227C21.9085 20.3611 22.0701 20.1995 22.1509 20.038C22.3125 19.7148 22.3933 19.3108 22.4741 18.9068C22.4741 18.7452 22.4741 18.5028 22.4741 18.3412C22.4741 18.3412 22.3933 18.2604 22.2317 18.1796Z"
              fill="white"
            />
          </g>
          <defs>
            <clipPath id="clip0_195_1755">
              <rect width="30" height="30" fill="white" />
            </clipPath>
          </defs>
        </svg>
      </button>
    </div>
  );
};

export default FloatingSocialIcons;
